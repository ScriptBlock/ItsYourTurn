extends layout

block content
    nav(class="navbar navbar-expand-md navbar-dark fixed-top bg-dark")
        if !isDMChosen
            span(class="navbar-brand mb-0 h1") Hello #{s.userName}
            form(action="/claimdm", method="POST")
                button(class="btn btn-outline-success") Claim DM
        if isDMChosen && s.isDM
            span(class="navbar-brand mb-0 h1") [DM] Hello #{s.userName} 
            form(action="/releasedm", method="POST")
                div.container
                    button(class="btn btn-outline-success") Release DM
        if s.charName != null && s.charName != ""
            form(action="/releasechar", method="POST")
                div.container
                    button(class="btn btn-outline-success") Release #{s.charName}



    main(class="container px-0" role="main")
        div(class="row justify-content-center mb-sm-2 p-2 bg-secondary")
            button(class="btn btn-light mr-sm-2 border-dark" type="button") ðŸ¢€ Rewind
            div(class="alert alert-primary m-0" role="alert") Round: 1 / Segment: 1
            button(class="btn btn-light ml-sm-2 border-dark" type="button") Next ðŸ¢‚
        div(class="row")
            div(class="col-sm")
                h2(class="text-center") Initiative
                if initiative == null
                    div.container(class="mb-1") Start a new...
                    form(action="/newinitiative", method="POST")
                        button(class="btn btn-outline-success btn-block" name="mode" value="dnd") D&D Style
                        button(class="btn btn-outline-success btn-block" name="mode" value="clock8") 8 Round Clock Style
                        button(class="btn btn-outline-success btn-block" name="mode" value="clock10") 10 Round Clock Style
                        button(class="btn btn-outline-success btn-block" name="mode" value="clock12") 12 Round Clock Style
                else          
                    ul.list-group
                        each i in initiative
                            bg-secondary
                            if i.data
                                if i.selected
                                    li(class="list-group-item d-flex justify-content-between align-items-center bg-success") #{i.segment+1}: #{i.data.charName}
                                        span(class="badge badge-primary badge-pill") #{i.data.userName}
                                else
                                    li(class="list-group-item d-flex justify-content-between align-items-center bg-secondary") #{i.segment+1}: #{i.data.charName}
                                        span(class="badge badge-primary badge-pill") #{i.data.userName}
                                
                            else
                                li(class="list-group-item d-flex justify-content-between align-items-center bg-secondary") #{i.segment+1}: Empty

            div(class="col-sm justify-content-center") 
                h2(class="text-center") Controls
                div(class="mb-2")
                    form(action="/movecharacter/:charname/to-segmentnumber_or_maybe_relative-number", method="POST")
                        button(class="btn btn-outline-success btn-block") Move â–²
                        button(class="btn btn-outline-success btn-block") Move â–¼
                div(class="mb-2 p-2 border border-primary")
                    form.form-inline(action="/addtoinit", method="POST")
                        label.sr-only(for="addtype") Type
                        select(class="form-control mr-sm-2" id="addtype" name="addtype")
                            option Orc
                            option Dragon
                            option Mephostopholes

                        div.dropdown(class="mr-sm-2")
                            button(class="btn btn-secondary dropdown-toggle" type="button" id="addTypeButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false") Select type
                            div.dropdown-menu(aria-labelledby="addTypeButton")
                                button.dropdown-item(name="addplace" value="nextsegment") Add next
                                button.dropdown-item(name="addplace" value="topofnextround") Add top of next round
                                button.dropdown-item(name="addplace" value="endofround") Add at end of round

            div(class="col-sm")
                h2(class="text-center") Active Players
                ul.list-group
                    each user in loggedOnUsers
                        li(class="list-group-item d-flex justify-content-between align-items-center ") #{user.charName}
                            span(class="badge badge-primary badge-pill") #{user.userName}

